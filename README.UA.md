# WhisperBridge

### [README ENGLISH](README.md) | [ЗАВАНТАЖИТИ](https://github.com/catgirl3d/WhisperBridge/releases)

![1](docs/img/_251020140250.png) 

Настільна програма для миттєвого перекладу тексту на екрані з використанням OCR та GPT API. Захоплює область екрану, витягує текст і показує переклад в оверлеї, активується глобальною гарячою клавішею.

## Можливості

- **Захоплення області екрану + OCR** - використовує EasyOCR або LLM-оснований OCR для розпізнавання тексту
- **Швидкий переклад через GPT API** - миттєвий переклад витягнутого тексту
- **Оверлей з діями** - зручні функції копіювання та вставки
- **Глобальна гаряча клавіша** - за замовчуванням Ctrl+Shift+T
- **Системний трей** - іконка в треї та вікно налаштувань (Qt / PySide6)

Можливості (коротко)

- Підтримка кількох провайдерів: OpenAI, Google Generative AI та DeepL.
- Copy‑Translate: скопіюйте текст у буфер обміну та перекладіть за допомогою гарячої клавіші (налаштовується).

## Швидкий старт

**Системні вимоги:** Python 3.8+ (Windows/macOS/Linux)

### Встановлення

```bash
# Створення віртуального середовища
python -m venv .venv

# Активація віртуального середовища
# Windows
.venv\Scripts\activate

# macOS/Linux
source .venv/bin/activate

# Встановлення залежностей
pip install -r requirements.txt
```

```
Встановлення залежностей (рекомендовано для розробки)
pip install -e .[qt,dev]

Примітки:
- Проєкт оголошує опціональні extras у pyproject.toml; використайте `qt` щоб встановити PySide6 та залежності UI, і `dev` для інструментів розробника.
- Для мінімальної установки можна використати: `pip install -r requirements.txt`, але для розробки рекомендовано editable install з extras.
```

### Запуск
 
```bash
# Запуск програми з Qt інтерфейсом
python src/main.py
```

Пакування та консольний скрипт

Для розробки:
python src/main.py

Після встановлення пакету:
Після збірки та встановлення (наприклад `python -m build` / `pip install dist/*.whl`) стає доступний консольний скрипт `whisperbridge`:

whisperbridge

Примітка: у pyproject.toml оголошено консольний скрипт. Переконайтесь, що точка входу відповідає бажаному (src.main:main). Якщо бажаєте wrapper у пакеті, додайте `src/whisperbridge/main.py`, що делегує `src/main.py`, або оновіть pyproject.toml.

## Конфігурація

### Розташування файлів налаштувань

- **Windows:** `%USERPROFILE%\.whisperbridge\`
- **macOS/Linux:** `~/.whisperbridge/`

### Налаштування API ключа

1. Відкрийте діалог налаштувань у програмі
2. Введіть ваш OpenAI API ключ
3. Ключ буде збережено безпечно через систему keyring

### Додаткові налаштування

У вікні налаштувань ви можете налаштувати:
- Теми оформлення
- Гарячі клавіші
- Мови перекладу
- Параметри OCR

Налаштування: вбудована допомога

В діалозі налаштувань присутні кнопки "?" поруч з багатьма полями. Детальні тексти допомоги централізовані в:
src/whisperbridge/utils/help_texts.py
Змініть ці рядки для налаштування підказок у UI.

Конфігурація LLM-основного OCR

Додатково до EasyOCR програма підтримує LLM-основний OCR. Ключі конфігурації:
- ocr_engine: "easyocr" або "llm" (за замовчуванням: "easyocr")
- ocr_llm_prompt: власний промпт (наприклад: "Витягніть простий текст з зображення в природному порядку читання. Виведіть тільки текст.")
- openai_vision_model: назва моделі для OpenAI (наприклад "gpt-4o-mini")
- google_vision_model: назва моделі для Google (наприклад "gemini-1.5-flash")

Робочий процес: Захоплення → LLM OCR (зображення кодується й масштабується) → витяг тексту → переклад. Якщо LLM повертає порожній/помилковий результат і `ocr_enabled` = true, виконується автоматичний fallback на EasyOCR.

## Структура проекту

### Основні файли

| Файл | Опис |
|------|------|
| `src/main.py` | Точка входу програми |
| `src/whisperbridge/core/config.py` | Модель налаштувань та конфігурації |
| `src/whisperbridge/ui_qt/app.py` | Qt програма та ініціалізація |
| `requirements.txt` | Список залежностей Python |
| `pyproject.toml` | Конфігурація проекту |

### Архітектура

Структура проєкту (коротко)

WhisperBridge/
├── docs/              # документація та гайдлайни
├── src/
│   └── whisperbridge/
│       ├── core/      # основна логіка: конфіг, API менеджер, налаштування
│       ├── services/  # сервіси: OCR, переклад, гарячі клавіші
│       ├── providers/ # адаптери провайдерів: OpenAI, Google, DeepL
│       ├── ui_qt/     # Qt UI: app, вікна, workers
│       ├── utils/     # утиліти: зображення, екран, мова
│       └── models/    # pydantic моделі
├── tests/             # unit та інтеграційні тести
├── pyproject.toml
└── requirements.txt

Тестування

Тести знаходяться в директорії `tests/`. Запустіть:
pytest tests/

Для покриття:
pytest --cov=whisperbridge tests/

## Використання

1. **Запуск програми** - запустіть WhisperBridge, іконка з'явиться в системному треї
2. **Налаштування API** - налаштуйте OpenAI API ключ через вікно налаштувань
3. **Захоплення тексту** - натисніть гарячу клавішу (за замовчуванням Ctrl+Shift+T)
4. **Виділення області** - виділіть область екрану з текстом для перекладу
5. **Отримання перекладу** - перекладений текст з'явиться в оверлеї

## Технічні деталі

- **OCR рушій:** EasyOCR або LLM-оснований OCR для розпізнавання тексту в різних форматах
- **API перекладу:** OpenAI GPT API для високої якості перекладу
- **UI фреймворк:** Qt/PySide6 для кросплатформного інтерфейсу
- **Безпека:** Keyring для безпечного зберігання API ключів

## Підтримувані платформи

- Windows 10/11
- macOS 10.15+